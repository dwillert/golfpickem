{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":["file:///Users/danwillert/Projects/golfpickem/golf_pickem/src/app/api/aws/retrieveGolfData/route.js"],"sourcesContent":["import AWS from 'aws-sdk';\n\nAWS.config.update({\n  region: 'us-east-1',\n  credentials: new AWS.CognitoIdentityCredentials({\n    IdentityPoolId: 'us-east-1:c7fbde0b-bd35-4872-a018-8c5b469af387',\n  }),\n});\n\nconst s3 = new AWS.S3({\n  apiVersion: '2006-03-01',\n  signatureVersion: 'v4',\n  region: 'us-east-1',\n});\n\nconst getObjectS3 = async (bucket, key) => {\n  const params = { Bucket: bucket, Key: key };\n  const data = await s3.getObject(params).promise();\n  return JSON.parse(data.Body.toString('utf-8'));\n};\n\nconst listObjectsV2 = async (bucket, prefix) => {\n  const params = { Bucket: bucket };\n  const data = await s3.listObjectsV2(params).promise();\n  return data.Contents.find((item) => item.Key.startsWith(prefix))?.Key;\n};\n\nexport let cachedData = null;\n\nexport async function GET() {\n  try {\n    if (!cachedData) {\n      const tournamentKey = await listObjectsV2('golfpickem-bucket', 'golf_tournament_data');\n      const picksKey = await listObjectsV2('golfpickem-bucket', 'picks_data');\n\n      const tournamentData = await getObjectS3('golfpickem-bucket', tournamentKey);\n      const picksData = await getObjectS3('golfpickem-bucket', picksKey);\n\n      cachedData = { tournamentData, picksData }; // Cache the data\n    }\n\n    return new Response(JSON.stringify(cachedData), {\n      status: 200,\n      headers: { 'Content-Type': 'application/json' },\n    });\n  } catch (error) {\n    return new Response(JSON.stringify({ error: error.message }), {\n      status: 500,\n      headers: { 'Content-Type': 'application/json' },\n    });\n  }\n}"],"names":[],"mappings":";;;;AAAA;;AAEA,0IAAA,CAAA,UAAG,CAAC,MAAM,CAAC,MAAM,CAAC;IAChB,QAAQ;IACR,aAAa,IAAI,0IAAA,CAAA,UAAG,CAAC,0BAA0B,CAAC;QAC9C,gBAAgB;IAClB;AACF;AAEA,MAAM,KAAK,IAAI,0IAAA,CAAA,UAAG,CAAC,EAAE,CAAC;IACpB,YAAY;IACZ,kBAAkB;IAClB,QAAQ;AACV;AAEA,MAAM,cAAc,OAAO,QAAQ;IACjC,MAAM,SAAS;QAAE,QAAQ;QAAQ,KAAK;IAAI;IAC1C,MAAM,OAAO,MAAM,GAAG,SAAS,CAAC,QAAQ,OAAO;IAC/C,OAAO,KAAK,KAAK,CAAC,KAAK,IAAI,CAAC,QAAQ,CAAC;AACvC;AAEA,MAAM,gBAAgB,OAAO,QAAQ;IACnC,MAAM,SAAS;QAAE,QAAQ;IAAO;IAChC,MAAM,OAAO,MAAM,GAAG,aAAa,CAAC,QAAQ,OAAO;IACnD,OAAO,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAC,OAAS,KAAK,GAAG,CAAC,UAAU,CAAC,UAAU;AACpE;AAEO,IAAI,aAAa;AAEjB,eAAe;IACpB,IAAI;QACF,IAAI,CAAC,YAAY;YACf,MAAM,gBAAgB,MAAM,cAAc,qBAAqB;YAC/D,MAAM,WAAW,MAAM,cAAc,qBAAqB;YAE1D,MAAM,iBAAiB,MAAM,YAAY,qBAAqB;YAC9D,MAAM,YAAY,MAAM,YAAY,qBAAqB;YAEzD,aAAa;gBAAE;gBAAgB;YAAU,GAAG,iBAAiB;QAC/D;QAEA,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC,aAAa;YAC9C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;QAChD;IACF,EAAE,OAAO,OAAO;QACd,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,IAAI;YAC5D,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;QAChD;IACF;AACF","debugId":null}}]
}